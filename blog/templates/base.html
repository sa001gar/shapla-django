{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Shapla | Where Literature Meets Life</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;600;700&amp;family=Playfair+Display:ital,wght@0,400;0,600;1,400&amp;family=Inter:wght@400;500;600&amp;display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    {% tailwind_css %}

    <!-- Iconify -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #e5e5e5;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #d4d4d4;
        }

        .prose-bengali {
            font-family: 'Noto Sans Bengali', sans-serif;
            line-height: 1.9;
        }

        /* Custom Checkbox */
        .custom-checkbox {
            appearance: none;
            background-color: transparent;
            margin: 0;
        }

        .custom-checkbox+label {
            position: relative;
            padding-left: 28px;
            cursor: pointer;
            user-select: none;
        }

        .custom-checkbox+label::before {
            content: '';
            position: absolute;
            left: 0;
            top: 2px;
            width: 18px;
            height: 18px;
            border: 1.5px solid #d6d3d1;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .custom-checkbox:checked+label::before {
            background-color: #AA1C1C;
            border-color: #AA1C1C;
        }

        .custom-checkbox:checked+label::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 6px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .hidden-section {
            display: none !important;
        }

        .page-transition {
            animation: fadeIn 0.4s ease-out forwards;
        }

        /* Mobile Menu Transitions */
        .mobile-menu-open {
            overflow: hidden;
        }

        #mobile-menu {
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .menu-hidden {
            transform: translateX(100%);
        }

        .menu-visible {
            transform: translateX(0);
        }
    </style>
</head>

<body
    class="bg-cream text-stone font-bengali antialiased min-h-screen flex flex-col selection:bg-ink selection:text-white">

    {% include 'layout/header.html' %}
    {% block content %}
    {% endblock %}
    {% include 'layout/footer.html' %}

    <script>
        const views = {
            home: document.getElementById('view-home'),
            post: document.getElementById('view-post'),
            admin: document.getElementById('view-admin'),
            authors: document.getElementById('view-authors'),
            category: document.getElementById('view-category')
        };
        
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = document.getElementById('menu-icon');
        let isMenuOpen = false;

        function router(route) {
            Object.values(views).forEach(el => el.classList.add('hidden-section'));
            if (views[route]) {
                views[route].classList.remove('hidden-section');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function toggleMobileMenu() {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenu.classList.remove('menu-hidden');
                mobileMenu.classList.add('menu-visible');
                document.body.classList.add('mobile-menu-open');
                menuIcon.setAttribute('icon', 'lucide:x');
            } else {
                mobileMenu.classList.remove('menu-visible');
                mobileMenu.classList.add('menu-hidden');
                document.body.classList.remove('mobile-menu-open');
                menuIcon.setAttribute('icon', 'lucide:menu');
            }
        }

        function switchRole(role) {
            const btnReader = document.getElementById('btn-reader');
            const btnAdmin = document.getElementById('btn-admin');
            
            if (role === 'admin') {
                btnReader.className = "px-3 py-1 rounded-full text-xs font-semibold text-charcoal hover:bg-stone-200/50 transition-all";
                btnAdmin.className = "px-3 py-1 rounded-full text-xs font-semibold bg-ink text-white shadow-sm transition-all";
                router('admin');
            } else {
                btnAdmin.className = "px-3 py-1 rounded-full text-xs font-semibold text-charcoal hover:bg-stone-200/50 transition-all";
                btnReader.className = "px-3 py-1 rounded-full text-xs font-semibold bg-ink text-white shadow-sm transition-all";
                router('home');
            }
        }

        router('home');
    </script>

    {% block extra_js %}
    {% endblock %}
</body>

</html>